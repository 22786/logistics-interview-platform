<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1209329 Logistics Customer Discovery</title>
    <style>
        body { 
            font-family: 'Segoe UI', 'Tahoma', 'Geneva', 'Verdana', sans-serif; 
            padding: 40px; 
            background-color: #f4f7f6;
            max-width: 850px;
            margin: auto;
            line-height: 1.5;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }
        h2 { color: #004494; margin-top: 0; }
        h3 { color: #2c3e50; font-size: 1.1em; margin-bottom: 20px; }
        
        /* Instruction Box Styling */
        .instruction-box { 
            background-color: #f0f7ff; 
            border-left: 6px solid #0056b3; 
            padding: 15px 20px; 
            margin-bottom: 25px; 
            border-radius: 4px;
            font-size: 0.95em;
        }
        .instruction-box b { color: #0056b3; }

        #chat-box { 
            border: 1px solid #e0e0e0; 
            height: 400px; 
            overflow-y: auto; 
            padding: 15px; 
            margin-bottom: 20px; 
            background-color: #ffffff;
            border-radius: 8px;
        }
        .message { margin-bottom: 15px; padding: 10px; border-radius: 5px; }
        .student-msg { color: #0056b3; font-weight: bold; background: #eef4ff; display: inline-block; padding: 5px 10px; border-radius: 5px; }
        .persona-msg { color: #2e7d32; font-weight: bold; background: #e8f5e9; display: inline-block; padding: 5px 10px; border-radius: 5px; }

        .input-area { display: flex; gap: 10px; }
        input[type="text"], select { 
            padding: 12px; 
            border: 1px solid #ccc; 
            border-radius: 6px; 
            font-size: 15px;
        }
        button { 
            padding: 10px 25px; 
            background-color: #004494; 
            color: white; 
            border: none; 
            border-radius: 6px; 
            cursor: pointer; 
            font-weight: bold;
        }
        button:hover { background-color: #003366; }
        
        .student-info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            background: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>1209329 Business Creation for Logistics & SCM</h2>
    <h3>Workshop: Customer Discovery (Persona Interview)</h3>
    
    <div class="instruction-box">
        <b>üìå Guidelines / ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:</b>
        <ul style="margin: 10px 0; padding-left: 20px;">
            <li><b>Empathy First:</b> Listen to their pain before offering a solution. / ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏à‡πá‡∏ö‡∏õ‡∏ß‡∏î‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏™‡∏ô‡∏≠‡∏ó‡∏≤‡∏á‡πÅ‡∏Å‡πâ</li>
            <li><b>5 Whys:</b> Ask "Why" to find the root cause. / ‡∏ñ‡∏≤‡∏°‡∏ß‡πà‡∏≤ "‡∏ó‡∏≥‡πÑ‡∏°" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤‡∏ï‡πâ‡∏ô‡∏ï‡∏≠‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πâ‡∏à‡∏£‡∏¥‡∏á</li>
            <li><b>Lean Canvas:</b> Focus on <i>Problems</i> & <i>Customer Segments</i>. / ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏∏ Problem ‡πÅ‡∏•‡∏∞ Customer Segment</li>
        </ul>
    </div>

    <div class="student-info-grid">
        <div>
            <label><b>Student Name / ‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</b></label>
            <input type="text" id="studentName" placeholder="Full name" style="width: 90%;">
        </div>
        <div>
            <label><b>Student ID / ‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤:</b></label>
            <input type="text" id="studentId" placeholder="Student ID" style="width: 90%;">
        </div>
    </div>
    
    <label for="role"><b>Target Interviewee / ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏´‡πâ‡∏™‡∏±‡∏°‡∏†‡∏≤‡∏©‡∏ì‡πå:</b></label>
    <select id="role">
        <option value="somchai_retailer">Mr. Somchai (Traditional Retail)</option>
        <option value="vina_shipper">Ms. Vina (Warehouse)</option>
        <option value="lisa_startup">Lisa (Tech Founder)</option>
        <option value="bruno_driver">Bruno (Truck Driver)</option>
        <option value="marbel_forwarder">Marbel (Freight Forwarder)</option>
        <option value="ed_procurement">Ed (Factory Manager)</option>
        <option value="billie_seller">Billie (E-commerce)</option>
    </select>
    
    <div id="chat-box">
        <div class="message"><span class="persona-msg">System:</span> 
            Please enter your info and start your interview. / ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏™‡∏±‡∏°‡∏†‡∏≤‡∏©‡∏ì‡πå
        </div>
    </div>

    <div class="input-area">
        <input type="text" id="userInput" placeholder="Type your question... / ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà...">
        <button onclick="sendMessage()">Send / ‡∏™‡πà‡∏á</button>
    </div>
</div>

<script>
    async function sendMessage() {
        const name = document.getElementById('studentName').value;
        const id = document.getElementById('studentId').value;
        const input = document.getElementById('userInput');
        const role = document.getElementById('role').value;
        const chatBox = document.getElementById('chat-box');

        if (!name || !id) {
            alert("Please enter your Name and Student ID first! / ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°");
            return;
        }
        if (!input.value.trim()) return;

        // Display Student Message
        chatBox.innerHTML += `<div class="message"><span class="student-msg">Student:</span> ${input.value}</div>`;
        
        const currentMessage = input.value;
        input.value = 'Thinking... / ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•...';
        input.disabled = true;

        try {
            const response = await fetch('/chat', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ 
                    message: currentMessage,
                    role: role,
                    studentName: name,
                    studentId: id
                })
            });

            const data = await response.json();
            
            // Display Persona Message
            chatBox.innerHTML += `<div class="message"><span class="persona-msg">Persona:</span> ${data.text}</div>`;
        } catch (error) {
            chatBox.innerHTML += `<div class="message" style="color:red;">Error: Could not connect to the persona. / ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡∏ö‡∏≠‡∏ó‡πÑ‡∏î‡πâ</div>`;
        }

        input.value = '';
        input.disabled = false;
        input.focus();
        
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    document.getElementById('userInput').addEventListener('keypress', function (e) {
        if (e.key === 'Enter') {
            sendMessage();
        }
    });
</script>

</body>
</html>